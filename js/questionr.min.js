var test;!function(t,n){var e,o,r,s,a,p,u=t[n];if(void 0===typeof window.jQuery)throw"jQuery was not found";s={showClose:!0},u||(a={start:[],changeStep:[],end:[],close:[]},o={skipBtn:"Skip",doneBtn:"Done",closeTooltip:"Close"},r={},p={getI18NString:function(t){return r[t]||o[t]},invokeCallbackArray:function(t){if($.isArray(t))for(i=0,len=t.length;len>i;++i)p.invokeCallback(t[i])},invokeCallback:function(t){return"function"==typeof t?t():"object"==typeof t?p.invokeCallbackArray(t):void 0},invokeEventCallbacks:function(t,n){var e,i,o=a[t];if(n)return this.invokeCallback(n);for(e=0,i=o.length;i>e;++e)this.invokeCallback(o[e].cb)},valOrDefault:function(t,n){return void 0!==typeof t?t:n}},QuestionrBoard=function(t){this.init(t)},QuestionrBoard.prototype={_inputOptions:function(t,n){if(/radio|checkbox/.test(t)){var e,i,o=$("<ul></ul>");for(e=0,i=n.options.length;i>e;e++){var r=n.options[e],s=$('<li><label><input name="'+n.name+'" type="'+t+'" value="'+r.value+'"> '+(r.title||r.value)+"</label></li>");"string"==typeof r.hint&&s.append(this._hint(r.hint)),o.append(s)}return o}},_textarea:function(t){var n=void 0!==t.required?"required":"",e=$('<fieldset><textarea name="'+t.name+'" '+n+"></textarea></fieldset>");return"string"==typeof t.hint&&e.append(this._hint(t.hint)),e},_text:function(t){var n=void 0!==t.required?"required":"",e=$('<fieldset><input name="'+t.name+'" type="text" '+n+"></fieldset>");return"string"==typeof t.hint&&e.append(this._hint(t.hint)),e},_checkbox:function(t){return this._inputOptions("checkbox",t)},_radio:function(t){return this._inputOptions("radio",t)},_select:function(t){var n,e,i=void 0!==t.required?"required":"",o=$('<select name="'+t.name+'" '+i+"></select>"),r=$("<fieldset></fieldset>");for(n=0,e=t.options.length;e>n;n++){var s=t.options[n],a=$('<option value="'+s.value+'">'+(s.title||s.value)+"</option>");o.append(a)}return r.append(o),"string"==typeof t.hint&&r.append(this._hint(t.hint)),r},_hint:function(t){return $('<span class="info" title="'+t+'"><span class="icon-info"><span>?</span></span></span>')},_component:function(t){var n,e=$('<div class="fieldgroup"></div>');void 0!==t.title&&e.append("<p>"+t.title+"</p>");var i={textarea:"_textarea",text:"_text",checkbox:"_checkbox",radio:"_radio",select:"_select"},o="function"==typeof this[i[t.type]]?this[i[t.type]]:null;if(!o)throw'Input type "'+t.type+'" was not found';return n=o.call(this,t),e.append(n),e},_renderComponents:function(t){if("object"==typeof t&&!$.isArray(t))return this._component(t);var n,e,i;for(n=0,e=t.length;e>n;n++)i?i.append(this._component(t[n])):i=this._component(t[n]);return i},_closeBtn:function(){var t=this,n=$('<a href="#" class="close-action" title="'+p.getI18NString("closeTooltip")+'">'+p.getI18NString("closeTooltip")+"</a>");return n.on("click",function(n){n.preventDefault(),t.hide(!0)}),n},init:function(t){if($target="object"==typeof t.target?t.target:$(t.target),!$target.length)throw"Target element was not found";el=$('<div class="questionr board"><div class="questionr-container"></div></div>'),getOption("showClose")===!0&&el.prepend(this._closeBtn()),$target.append(el)},render:function(t,n){$container=el.find("> .questionr-container").first();var e=$('<div class="questionr-step" data-step-id="'+n+'"></div>'),i=$('<div class="form"></div>'),o=$('<div class="actions-wrapper"></div>');void 0!==t.title&&i.append($('<span class="title">'+t.title+"</span>")),void 0!==t.description&&i.append($('<span class="description">'+t.description+"</span>"));var r=this._renderComponents(t.form);i.append(r);var s=$('<button type="button" class="action">'+p.getI18NString("doneBtn")+"</button>");o.append(s),t.showSkip===!0&&o.append($('<button type="button" class="skip">'+p.getI18NString("skipBtn")+"</button>")),i.append(o),e.append(i),$container.html(e)},show:function(){el.fadeIn(200)},hide:function(t){var n=this;el.fadeOut(200,function(){t&&n.destroy()})},destroy:function(){el.remove()}},e=function(){var t,n,e,i;getBoard=function(){return n||(n=new QuestionrBoard(e)),n},getOption=function(t){return void 0===typeof e?s[t]:p.valOrDefault(e[t],s[t])},loadQuestionnaire=function(t){var n,e={};for(n in t)t.hasOwnProperty(n)&&"id"!==n&&"steps"!==n&&(e[n]=t[n]);return i.call(this,e),this},this.start=function(n,e){var i,o;if(t||(t=n,loadQuestionnaire.call(this,n)),"function"==typeof e&&this.listen("end",e),p.invokeEventCallbacks("start"),i=getBoard(),void 0===t.steps[0])throw"Step was not found";return o=t.steps[0],i.render(o,0),i.show(),this},this.end=function(){p.invokeEventCallbacks("end")},this.jumpToStep=function(){return this},this.getLastAnswer=function(){},this.getCurrQuestionnaire=function(){return t},this.getCurrStep=function(){},this.getCurrStepNum=function(){},this.getStep=function(){},this.getData=function(){},this.listen=function(t,n){return t&&a[t].push({cb:n}),this},this.unlisten=function(t,n){var e,i,o=a[t];for(e=0,i=o.length;i>e;++e)o[e]===n&&o.splice(e,1);return this},this.resetDefaultOptions=function(){return e={},this},i=function(t){var n,i=["start","end"];for(e||this.resetDefaultOptions(),$.extend(e,t),t&&$.extend(r,t.i18n),n=0,len=i.length;len>n;++n)eventPropName="on"+i[n].charAt(0).toUpperCase()+i[n].substring(1),t[eventPropName]&&this.listen(i[n],t[eventPropName]);return this},this.configure=function(t){return i.call(this,t)}},u=new e,t[n]=u)}(window,"questionr");